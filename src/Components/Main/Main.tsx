import { useEffect, useState } from 'react';
import { CardItem } from '../Card/CardItem';

import styles from './main.module.css';

export const Main = () => {
  const [minutes, setMinutes] = useState(2);
  const [hours, setHours] = useState(
    Math.floor((minutes % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
  );

  useEffect(() => {
    const timer = setInterval(() => {
      setMinutes((minutes) => {
        if (minutes === 0) {
          clearInterval(timer);
          return 0;
        } else return minutes - 1;
      });
    }, 60000);

    return () => clearInterval(timer);
  }, []);

  return (
    <>
      <header className={styles.header}>
        <p className={styles.text}>–°–∫–∏–¥–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç:</p>
        <div className={styles.timer_wrapper}>
          <div className={styles.timer_unit_wrapper}>
            <p className={styles.timer_time}>{hours}</p>
            <p className={styles.timer_text}>—á–∞—Å–æ–≤</p>
          </div>
          <p className={styles.timer_separator}>:</p>
          <div className={styles.timer_unit_wrapper}>
            <p className={styles.timer_time}>{minutes}</p>
            <p className={styles.timer_text}>–º–∏–Ω—É—Ç</p>
          </div>
        </div>
      </header>
      <main className={styles.wrapper}>
        <h1 className={styles.title}>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω</h1>
        <picture className={styles.banner}>
          <source srcSet='img.png' media='(max-width: 600px)' />
          <img src='img big.png' alt='–§–æ—Ç–æ, —Ä–µ–∫–ª–∞–º–∏—Ä—É—é—â–µ–µ –∫—É—Ä—Å' />
        </picture>
        <ul className={styles.card_list}>
          <li className={styles.card_item}>
            <CardItem
              date='1 –º–µ—Å—è—Ü'
              text='–ß—Ç–æ–±—ã –ø—Ä–æ—Å—Ç–æ –Ω–∞—á–∞—Ç—å üëçüèª'
              priceDiscount={699}
              price={999}
              discount={30}
            />
          </li>
          <li className={styles.card_item}>
            <CardItem
              date='3 –º–µ—Å—è—Ü–∞'
              text='–ü—Ä–∏–≤–µ—Å—Ç–∏ —Ç–µ–ª–æ –≤–ø–æ—Ä—è–¥–æ–∫ üí™üèª'
              priceDiscount={999}
              price={1299}
              discount={40}
            />
          </li>
          <li className={styles.card_item}>
            <CardItem
              date='1 –≥–æ–¥'
              text='–ò–∑–º–µ–Ω–∏—Ç—å –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ üî•'
              priceDiscount={2990}
              price={5990}
              discount={50}
            />
          </li>
          <li className={styles.card_item}>
            <CardItem
              date='–ù–∞–≤—Å–µ–≥–¥–∞'
              text='–í—Å–µ–≥–¥–∞ –±—ã—Ç—å –≤¬†—Ñ–æ—Ä–º–µ ‚≠êÔ∏è'
              priceDiscount={5990}
              price={18990}
              discount={70}
            />
          </li>
        </ul>
        <p className={styles.text_hint}>
          –°–ª–µ–¥—É—è –ø–ª–∞–Ω—É –Ω–∞ 3 –º–µ—Å—è—Ü–∞, –ª—é–¥–∏ –ø–æ–ª—É—á–∞—é—Ç –≤ 2 —Ä–∞–∑–∞ –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á–µ–º
          –∑–∞ 1 –º–µ—Å—è—Ü
        </p>
        <div className={styles.policy}>
          <input id='policy' type='checkbox' className={styles.policy_input} />
          <label htmlFor='policy' className={styles.policy_label}>
            –Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å <a href='#'>–ü—Ä–∞–≤–∏–ª–∞–º–∏ —Å–µ—Ä–≤–∏—Å–∞</a> –∏ —É—Å–ª–æ–≤–∏—è–º–∏{' '}
            <a href='#'>–ü—É–±–ª–∏—á–Ω–æ–π –æ—Ñ–µ—Ä—Ç—ã</a>.
          </label>
        </div>
        <button className={styles.button_buy}>–∫—É–ø–∏—Ç—å</button>

        <p className={styles.policy_warning}>
          –ù–∞–∂–∏–º–∞—è ¬´–ö—É–ø–∏—Ç—å¬ª, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–≥–ª–∞—à–∞–µ—Ç—Å—è –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ
          –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏—é –∫—É–ø–ª–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞. –î–∞–ª—å–Ω–µ–π—à–∏–µ —Å–ø–∏—Å–∞–Ω–∏—è
          –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º —É—á–∞—Å—Ç–≤—É—é—â–∏–º –≤ –∞–∫—Ü–∏–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—Ç—Å—è –ø–æ –ø–æ–ª–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
          —Å–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–µ—Ä—Ç–µ.
        </p>
      </main>
    </>
  );
};
